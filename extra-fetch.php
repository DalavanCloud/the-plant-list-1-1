<?php

require_once('fetch/lib.php');

$ids = array(
'gcc-115167',
'gcc-115167',
'gcc-115167',
'gcc-127806',
'gcc-127806',
'gcc-127806',
'gcc-127806',
'gcc-128174',
'gcc-132881',
'gcc-140809',
'gcc-140809',
'gcc-144418',
'gcc-144418',
'gcc-144418',
'gcc-144418',
'gcc-144418',
'gcc-144418',
'gcc-144418',
'gcc-44476',
'gcc-45409',
'gcc-50277',
'gcc-50277',
'gcc-50277',
'gcc-50277',
'gcc-50277',
'gcc-90333',
'gcc-90333',
'gcc-90333',
'gcc-90333',
'kew-218331',
'kew-2335560',
'kew-2339627',
'kew-2339671',
'kew-2339674',
'kew-2339675',
'kew-2371403',
'kew-2371423',
'kew-2371424',
'kew-2404449',
'kew-2411592',
'kew-2433183',
'kew-2433864',
'kew-2433956',
'kew-2433962',
'kew-2442375',
'kew-2446031',
'kew-2450985',
'kew-2450985',
'kew-2482727',
'kew-2484151',
'kew-2484343',
'kew-2491941',
'kew-2507769',
'kew-2550486',
'kew-2550488',
'kew-2550496',
'kew-2587525',
'kew-2589283',
'kew-2594481',
'kew-2603865',
'kew-2603870',
'kew-2605164',
'kew-2605166',
'kew-2605167',
'kew-2605168',
'kew-2607632',
'kew-2607637',
'kew-2607638',
'kew-2607639',
'kew-2607640',
'kew-2607640',
'kew-2607644',
'kew-2607645',
'kew-2609067',
'kew-2609069',
'kew-2609070',
'kew-2609247',
'kew-2617261',
'kew-2620418',
'kew-2620419',
'kew-2620420',
'kew-2620421',
'kew-2620422',
'kew-2620423',
'kew-2626152',
'kew-2626154',
'kew-2636208',
'kew-2636210',
'kew-2637906',
'kew-2637906',
'kew-2640271',
'kew-2640271',
'kew-2643283',
'kew-2668315',
'kew-2673270',
'kew-2673291',
'kew-2673299',
'kew-2673335',
'kew-2682915',
'kew-2682915',
'kew-2682920',
'kew-2682921',
'kew-2765524',
'kew-2770841',
'kew-2770842',
'kew-2772939',
'kew-2773106',
'kew-2773141',
'kew-2787505',
'kew-2787505',
'kew-2802824',
'kew-2868575',
'kew-2884838',
'kew-2897004',
'kew-2899062',
'kew-2904080',
'kew-298513',
'kew-298513',
'kew-386961',
'kew-386961',
'kew-386961',
'kew-386961',
'kew-386984',
'kew-386984',
'kew-386994',
'kew-386994',
'kew-387010',
'kew-387010',
'kew-4533132',
'kew-456291',
'kew-456291',
'kew-456388',
'kew-456389',
'kew-8616',
'rjp-19550',
'rjp-19552',
'rjp-19556',
'rjp-29569',
'rjp-33379',
'rjp-48585',
'rjp-48593',
'rjp-48603',
'rjp-48606',
'rjp-48615',
'rjp-48622',
'rjp-48623',
'rjp-48624',
'rjp-48628',
'rjp-48632',
'rjp-48635',
'rjp-48638',
'rjp-48639',
'rjp-48641',
'rjp-48642',
'rjp-48648',
'rjp-48652',
'rjp-48653',
'rjp-48654',
'rjp-48676',
'rjp-48678',
'rjp-48686',
'rjp-48687',
'rjp-48694',
'rjp-48695',
'rjp-48696',
'rjp-48696',
'rjp-48696',
'rjp-48697',
'rjp-48699',
'rjp-48704',
'rjp-61432',
'rjp-61652',
'tro-100372897',
'tro-100372897',
'tro-100374922',
'tro-13002156',
'tro-13006380',
'tro-25516819',
'tro-25553283',
'tro-25553283',
'tro-25560763',
'tro-25560763',
'tro-25560763',
'tro-26600760',
'tro-26600767',
'tro-26602312',
'tro-26602312',
'tro-26603496',
'tro-35171153',
'tro-35171154',
'tro-35185642',
'tro-35200409',
'tro-35208686',
'tro-35208686',
'tro-35216600',
'tro-35216600',
'tro-35217013',
'tro-35217450',
'tro-50058814',
'tro-50120972',
'tro-50120972',
'tro-50223171',
'tro-50227269',
'tro-50241689',
'tro-50242840',
'tro-50242843',
'tro-50242845',
'tro-50242858',
'tro-50243446',
'tro-50245423',
'tro-50245423',
'tro-50307667',
'tro-50307667',
'tro-50333823',
'tro-50337926',
'tro-50337958',
'tro-50337958',
'tro-5107413',
'tro-703651'
);

$ids=array(
'kew-2529444',
'kew-2742980'
);

// 'http://www.theplantlist.org/tpl1.1/search?q=Calamphoreus&csv=true' > Calamph

foreach ($ids as $id)
{
	$url = 'http://www.theplantlist.org/tpl1.1/search?q=' . $id;
	
	$html = get($url);
	
	if (preg_match('/<i class="genus">(?<genus>.*)<\/i>/Uu', $html, $m))
	{
		print_r($m);
		
		
		$genus = $m['genus'];
		$genus = preg_replace('/Ã—&nbsp;/Uu', ' ', $genus);
		echo $genus . "\n";
		
		$dirname = dirname(__FILE__) . '/extra/csv/missed';
	
	
		$url = 'http://www.theplantlist.org/tpl1.1/search?q=' . $genus . '&csv=true';

		$csv = get($url);

		echo $csv;

		file_put_contents($dirname . '/' . $genus . '.csv', $csv);
		
		
		
	}
	
	//exit();
	
	
}
	
	